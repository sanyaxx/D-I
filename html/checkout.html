<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Food4U</title>
<link rel="stylesheet" href="styles\checkout.css">
<link rel="stylesheet" href="styles\navigation.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

<div class="container">
  <div class="header-icons">
    <span class="cart-counter" id="cart-counter" style="font-weight: bold;"></span>
    <i class="fas fa-shopping-cart" id="shopping-cart" onclick="goCart()"></i>
    <i class="fas fa-cog" id="settings" onclick="goSettings()"></i>
  </div>
  <i class="fas fa-arrow-left back-icon" onclick="goBack()"></i>

  <!-- <div class="back-button">
    <button type="button" onclick="goBack()"><i class="fas fa-arrow-left"></i></button>
  </div> -->
  
  <div style="text-align: center;">
    <h2>Checkout</h2>
  </div>
  <div class="delivery-details">
    <h3>Delivery Address</h3>
    <div class="">
      <input id="address" name="address" placeholder="Address" type="text">
      <img class="powered-by-google" src="https://storage.googleapis.com/geo-devrel-public-buckets/powered_by_google_on_white.png" alt="Powered by Google"/>
      <input id ="premise" name="premise" placeholder="Premise" type="text">
      <input id ="area" name="area" placeholder="Area" type="text">
      <input id="locality" name="locality" placeholder="City" type="text">
      <input id="state" name="state" placeholder="State" type="text">
      <input id="postcode" name="postcode" placeholder="Postcode" type="number">  
    </div>
  </div>
  
  <div class="charges">
    <h3>Charges</h3>
    <p>Delivery Charge: RM 10</p>
    <p>Total Charge: RM 50</p>
  </div>
  <div class="discount">
    <h3>Apply Discount Code</h3>
    <div class="input-container">
      <input type="text" placeholder="Enter promo code">
      <button type="button">Apply</button>
    </div>
  </div>

  <div class="vouchers">
    <br>
    <button type="button">View Available Vouchers</button>
  </div>
  <div class="payment-method">
    <h3>Payment Method</h3>
    <form action="checkout.php" method="POST">
      <input type="radio" id="cod" name="payment" value="Cash">
      <label for="cod">Cash on Delivery</label><br>
      <input type="radio" id="card" name="payment" value="Credit/Debit Card">
      <label for="card">Credit/Debit Card</label><br>
      <input type="radio" id="wallet" name="payment" value="Wallet">
      <label for="wallet">E-wallet</label><br>
      <input type="radio" id="onlinebanking" name="payment" value="Online Banking">
      <label for="onlinebanking">Online Banking</label><br>
      <button type="submit">Checkout</button>
    </form>
  </div>
</div>

</body>
</html>

<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initAutocomplete&libraries=places&v=weekly"
    defer></script>

<script>
  function initAutocomplete() {
    const addressfield = document.querySelector("#address"); // Define addressfield

    // Create the autocomplete object, restricting the search predictions to
    // addresses in Malaysia
    autocomplete = new google.maps.places.Autocomplete(addressfield, {
        componentRestrictions: { country: ["my"] },
        fields: ["address_components", "geometry", "name", "formatted_address"],
        types: ["establishment"],
    });

    // When the user selects an address from the drop-down, fill-up the
    // address fields in the form.
    autocomplete.addListener("place_changed", fillInAddress);
  }

  function fillInAddress() {
    // Get the place details from the autocomplete object.
    const place = autocomplete.getPlace();
    let premise = "";
    let road = "";
    let area = "";
    let city = "";
    let state = "";
    let postcode = "";

    console.log("Place Object:", place);

    // Access name
    premise = place.name;

    // Get each component of the address from the place details,
    // and then fill-in the corresponding field on the form.
    // place.address_components are google.maps.GeocoderAddressComponent objects
    // which are documented at http://goo.gle/3l5i5Mr
    for (const component of place.address_components) {

        // @ts-ignore remove once typings fixed
        const componentType = component.types[0];

        switch (componentType) {
            case "route": {
                road = component.long_name;
                break;
            }
            case "sublocality_level_1": {
                area = component.long_name;
                break;
            }
            case "locality": {
                city = component.long_name;
                break;
            }
            case "administrative_area_level_1": {
                state = component.long_name;
                break;
            }
            case "postal_code": {
                postcode = component.long_name;
                break;
            }
        }
    }

    // Update the form fields with the extracted data
    document.querySelector("#premise").value = premise;
    document.querySelector("#area").value = `${road}, ${area}`;
    document.querySelector("#locality").value = city;
    document.querySelector("#state").value = state;
    document.querySelector("#postcode").value = postcode;
  }

  window.initAutocomplete = initAutocomplete;
</script>

<script src="functions.js"></script>
